#!/usr/bin/env python

import argparse
import sys

import common

from osbuild import build
from osbuild import main


parser = argparse.ArgumentParser()
parser.add_argument("module", nargs="?", help="name of the module to build")
parser.add_argument("--clean-all", action="store_true",
                    help="clean everything before building")
args = parser.parse_args()

common.setup()

if args.module:
    if not build.build_one(args.module):
        sys.exit(1)
else:
    if not main.run_build(clean_all=args.clean_all):
        sys.exit(1)
